---
import { App } from "@krag/react-ui";
import Layout from '../layouts/DashboardLayout.astro';
import { auth } from "../lib/auth";

const session = await auth.api.getSession({
  headers: Astro.request.headers,
});

if (!session) {
  return Astro.redirect("/sign-in");
}
---

<Layout title="Dashboard">
  <App 
    client:only="react" 
    basepath="/dashboard" 
    platform="astro"
    initialSession={session}
  />
</Layout>
